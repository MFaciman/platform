<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AFL — Client Profile & Suitability</title>
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@300;400;500;600;700&family=DM+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
  :root {
    --navy:    #1C3A63;
    --navy2:   #2A6496;
    --green:   #1A7A4A;
    --gold:    #B45309;
    --red:     #DC2626;
    --slate:   #475569;
    --slate2:  #94A3B8;
    --ice:     #F0F5FF;
    --surface: #F8FAFC;
    --surface2:#EEF3FA;
    --white:   #FFFFFF;
    --border:  #E2E8F0;
    --score-green: #15803D;
    --score-yellow: #B45309;
    --score-red: #DC2626;
  }

  * { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    font-family: 'DM Sans', sans-serif;
    background: var(--surface);
    color: var(--navy);
    min-height: 100vh;
  }

  /* ── TOP NAV BAR ── */
  .top-bar {
    background: var(--navy);
    color: white;
    padding: 0 24px;
    height: 52px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    position: sticky;
    top: 0;
    z-index: 100;
    box-shadow: 0 2px 8px rgba(28,58,99,0.18);
  }
  .top-bar .logo {
    font-size: 15px;
    font-weight: 700;
    letter-spacing: 0.04em;
    color: white;
    text-decoration: none;
  }
  .top-bar .logo span { color: #60A5FA; }
  .top-bar nav { display: flex; gap: 4px; }
  .top-bar nav a {
    color: rgba(255,255,255,0.7);
    text-decoration: none;
    font-size: 13px;
    font-weight: 500;
    padding: 6px 12px;
    border-radius: 6px;
    transition: all 0.15s;
  }
  .top-bar nav a:hover { background: rgba(255,255,255,0.1); color: white; }
  .top-bar nav a.active { background: rgba(255,255,255,0.15); color: white; }
  .top-bar .nav-right { display: flex; align-items: center; gap: 10px; }
  .client-chip-top {
    display: flex;
    align-items: center;
    gap: 6px;
    background: rgba(255,255,255,0.1);
    border: 1px solid rgba(255,255,255,0.2);
    border-radius: 20px;
    padding: 4px 10px;
    font-size: 12px;
    color: rgba(255,255,255,0.85);
  }
  .client-chip-top .dot {
    width: 7px; height: 7px; border-radius: 50%;
    background: var(--slate2);
  }
  .client-chip-top.loaded .dot { background: #4ADE80; }

  /* ── PAGE LAYOUT ── */
  .page-wrap {
    max-width: 1100px;
    margin: 0 auto;
    padding: 28px 24px 60px;
  }

  /* ── PAGE HEADER ── */
  .page-header {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    margin-bottom: 28px;
    gap: 20px;
  }
  .page-header h1 {
    font-size: 22px;
    font-weight: 700;
    color: var(--navy);
  }
  .page-header p {
    font-size: 13px;
    color: var(--slate);
    margin-top: 4px;
  }

  /* ── SCORE PANEL ── */
  .score-panel {
    background: var(--white);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 20px 24px;
    min-width: 220px;
    text-align: center;
    box-shadow: 0 1px 4px rgba(28,58,99,0.06);
    flex-shrink: 0;
  }
  .score-panel .score-label {
    font-size: 11px;
    font-weight: 600;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    color: var(--slate2);
    margin-bottom: 8px;
  }
  .score-ring {
    position: relative;
    width: 100px;
    height: 100px;
    margin: 0 auto 10px;
  }
  .score-ring svg { transform: rotate(-90deg); }
  .score-ring .ring-bg { fill: none; stroke: var(--border); stroke-width: 8; }
  .score-ring .ring-fill {
    fill: none;
    stroke-width: 8;
    stroke-linecap: round;
    stroke-dasharray: 283;
    stroke-dashoffset: 283;
    transition: stroke-dashoffset 0.6s cubic-bezier(.4,0,.2,1), stroke 0.4s;
  }
  .score-ring .score-num {
    position: absolute;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    font-family: 'DM Mono', monospace;
    font-size: 26px;
    font-weight: 500;
    color: var(--navy);
    line-height: 1;
  }
  .score-badge {
    display: inline-block;
    padding: 4px 12px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: 600;
    background: var(--surface2);
    color: var(--slate);
  }
  .score-badge.strong { background: #DCFCE7; color: var(--score-green); }
  .score-badge.moderate { background: #FEF3C7; color: var(--score-yellow); }
  .score-badge.limited { background: #FEE2E2; color: var(--score-red); }

  .score-breakdown {
    margin-top: 12px;
    text-align: left;
    border-top: 1px solid var(--border);
    padding-top: 12px;
  }
  .score-breakdown .sb-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 11px;
    color: var(--slate);
    padding: 2px 0;
  }
  .score-breakdown .sb-row .sb-val {
    font-family: 'DM Mono', monospace;
    font-size: 12px;
    font-weight: 500;
    color: var(--navy);
  }

  /* ── MAIN GRID ── */
  .form-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 18px;
  }

  .section-card {
    background: var(--white);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 20px 22px;
    box-shadow: 0 1px 4px rgba(28,58,99,0.06);
  }
  .section-card.full { grid-column: 1 / -1; }

  .section-title {
    font-size: 11px;
    font-weight: 700;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    color: var(--navy2);
    margin-bottom: 16px;
    padding-bottom: 8px;
    border-bottom: 1px solid var(--border);
    display: flex;
    align-items: center;
    gap: 8px;
  }
  .section-title svg { opacity: 0.7; }

  /* ── FORM ELEMENTS ── */
  .field { margin-bottom: 14px; }
  .field:last-child { margin-bottom: 0; }
  .field label {
    display: block;
    font-size: 12px;
    font-weight: 600;
    color: var(--slate);
    margin-bottom: 5px;
    letter-spacing: 0.01em;
  }
  .field input,
  .field select,
  .field textarea {
    width: 100%;
    padding: 8px 11px;
    border: 1.5px solid var(--border);
    border-radius: 7px;
    font-family: 'DM Sans', sans-serif;
    font-size: 14px;
    color: var(--navy);
    background: var(--white);
    transition: border-color 0.15s, box-shadow 0.15s;
    outline: none;
  }
  .field input:focus,
  .field select:focus,
  .field textarea:focus {
    border-color: var(--navy2);
    box-shadow: 0 0 0 3px rgba(42,100,150,0.1);
  }
  .field input.mono { font-family: 'DM Mono', monospace; }
  .field textarea { min-height: 70px; resize: vertical; }

  .field-row { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
  .field-row-3 { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 12px; }

  /* ── PILL SELECTORS ── */
  .pill-group { display: flex; gap: 8px; flex-wrap: wrap; }
  .pill-opt {
    padding: 7px 14px;
    border-radius: 20px;
    border: 1.5px solid var(--border);
    background: var(--white);
    font-size: 13px;
    font-weight: 500;
    color: var(--slate);
    cursor: pointer;
    transition: all 0.15s;
    user-select: none;
  }
  .pill-opt:hover { border-color: var(--navy2); color: var(--navy2); }
  .pill-opt.selected {
    border-color: var(--navy);
    background: var(--navy);
    color: white;
  }
  .pill-opt.selected.gold { border-color: var(--gold); background: var(--gold); }
  .pill-opt.selected.green { border-color: var(--green); background: var(--green); }
  .pill-opt.selected.navy2 { border-color: var(--navy2); background: var(--navy2); }

  /* ── SUITABILITY INDICATORS ── */
  .suitability-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 10px;
    margin-top: 4px;
  }
  .suit-card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 10px 12px;
    text-align: center;
  }
  .suit-card .suit-label {
    font-size: 10px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.07em;
    color: var(--slate2);
    margin-bottom: 4px;
  }
  .suit-card .suit-val {
    font-family: 'DM Mono', monospace;
    font-size: 15px;
    font-weight: 500;
    color: var(--navy);
  }
  .suit-card .suit-bar-wrap {
    height: 4px;
    background: var(--border);
    border-radius: 2px;
    margin-top: 5px;
    overflow: hidden;
  }
  .suit-card .suit-bar {
    height: 100%;
    border-radius: 2px;
    background: var(--navy2);
    width: 0;
    transition: width 0.5s cubic-bezier(.4,0,.2,1);
  }

  /* ── WEIGHT SCORE TABLE ── */
  .weight-table {
    width: 100%;
    font-size: 12px;
    border-collapse: collapse;
    margin-top: 4px;
  }
  .weight-table th {
    text-align: left;
    padding: 6px 8px;
    font-weight: 600;
    color: var(--slate2);
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 0.06em;
    border-bottom: 1px solid var(--border);
  }
  .weight-table td {
    padding: 7px 8px;
    border-bottom: 1px solid var(--surface2);
    color: var(--slate);
    vertical-align: middle;
  }
  .weight-table td:last-child { font-family: 'DM Mono', monospace; font-size: 12px; text-align: right; color: var(--navy); font-weight: 500; }
  .weight-table tr:last-child td { border-bottom: none; }

  .score-bar-cell { width: 100px; }
  .mini-bar-wrap { height: 5px; background: var(--border); border-radius: 3px; overflow: hidden; }
  .mini-bar { height: 100%; border-radius: 3px; transition: width 0.5s; }

  /* ── ACTION BUTTONS ── */
  .action-row {
    display: flex;
    gap: 10px;
    align-items: center;
    margin-top: 24px;
    padding-top: 20px;
    border-top: 1px solid var(--border);
  }
  .btn {
    display: inline-flex;
    align-items: center;
    gap: 7px;
    padding: 10px 20px;
    border-radius: 8px;
    font-family: 'DM Sans', sans-serif;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    border: none;
    transition: all 0.15s;
  }
  .btn-primary {
    background: var(--navy);
    color: white;
  }
  .btn-primary:hover { background: #162d4e; transform: translateY(-1px); box-shadow: 0 4px 12px rgba(28,58,99,0.25); }
  .btn-secondary {
    background: var(--white);
    color: var(--navy);
    border: 1.5px solid var(--border);
  }
  .btn-secondary:hover { border-color: var(--navy2); color: var(--navy2); }
  .btn-ghost {
    background: transparent;
    color: var(--slate);
    padding: 10px 14px;
  }
  .btn-ghost:hover { color: var(--navy); background: var(--surface2); border-radius: 8px; }

  /* ── TOAST ── */
  .toast {
    position: fixed;
    bottom: 28px;
    right: 28px;
    background: var(--navy);
    color: white;
    padding: 12px 20px;
    border-radius: 10px;
    font-size: 14px;
    font-weight: 500;
    box-shadow: 0 8px 24px rgba(28,58,99,0.3);
    display: flex;
    align-items: center;
    gap: 10px;
    transform: translateY(80px);
    opacity: 0;
    transition: all 0.35s cubic-bezier(.4,0,.2,1);
    z-index: 200;
  }
  .toast.visible { transform: translateY(0); opacity: 1; }
  .toast.success { background: var(--green); }
  .toast .toast-icon { font-size: 16px; }

  /* ── CLEAR CONFIRM ── */
  .modal-overlay {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(28,58,99,0.35);
    z-index: 300;
    align-items: center;
    justify-content: center;
  }
  .modal-overlay.open { display: flex; }
  .modal-box {
    background: white;
    border-radius: 14px;
    padding: 28px 32px;
    max-width: 380px;
    width: 90%;
    box-shadow: 0 20px 60px rgba(28,58,99,0.25);
  }
  .modal-box h3 { font-size: 16px; font-weight: 700; margin-bottom: 8px; color: var(--navy); }
  .modal-box p { font-size: 13px; color: var(--slate); margin-bottom: 20px; line-height: 1.5; }
  .modal-box .modal-actions { display: flex; gap: 10px; justify-content: flex-end; }

  /* ── PROFILE STATUS BANNER ── */
  .profile-banner {
    display: none;
    align-items: center;
    gap: 10px;
    background: #DCFCE7;
    border: 1px solid #86EFAC;
    border-radius: 10px;
    padding: 10px 16px;
    margin-bottom: 20px;
    font-size: 13px;
    color: var(--score-green);
    font-weight: 500;
  }
  .profile-banner.visible { display: flex; }
  .profile-banner .banner-name { font-weight: 700; }
  .profile-banner .banner-score { font-family: 'DM Mono', monospace; font-weight: 600; }

  /* ── REQUIRED INDICATOR ── */
  .req { color: var(--red); margin-left: 2px; }

  /* ── INLINE HINT ── */
  .field-hint {
    font-size: 11px;
    color: var(--slate2);
    margin-top: 4px;
    line-height: 1.4;
  }

  /* ── RESPONSIVE ── */
  @media (max-width: 768px) {
    .form-grid { grid-template-columns: 1fr; }
    .section-card.full { grid-column: 1; }
    .page-header { flex-direction: column; }
    .score-panel { min-width: unset; width: 100%; }
    .field-row, .field-row-3 { grid-template-columns: 1fr; }
    .suitability-grid { grid-template-columns: 1fr 1fr; }
  }

  /* ── SCORE STATES ── */
  .ring-fill.high { stroke: var(--score-green); }
  .ring-fill.med  { stroke: #F59E0B; }
  .ring-fill.low  { stroke: var(--score-red); }
  .ring-fill.none { stroke: var(--border); }
</style>
</head>
<body>

<!-- TOP NAV -->
<div class="top-bar">
  <a href="index.html" class="logo">AFL <span>PLATFORM</span></a>
  <nav>
    <a href="browse.html">Browse</a>
    <a href="basket.html">Basket</a>
    <a href="model.html">Modeler</a>
    <a href="builder.html">Builder</a>
    <a href="client.html" class="active">Client</a>
    <a href="sponsors.html">Sponsors</a>
  </nav>
  <div class="nav-right">
    <div class="client-chip-top" id="nav-client-chip">
      <div class="dot"></div>
      <span id="nav-client-label">No client loaded</span>
    </div>
  </div>
</div>

<!-- MODAL -->
<div class="modal-overlay" id="clear-modal">
  <div class="modal-box">
    <h3>Clear Client Profile?</h3>
    <p>This will erase all current client data and reset the suitability score. This cannot be undone.</p>
    <div class="modal-actions">
      <button class="btn btn-secondary" onclick="closeModal()">Cancel</button>
      <button class="btn btn-primary" style="background:var(--red)" onclick="confirmClear()">Clear Profile</button>
    </div>
  </div>
</div>

<!-- TOAST -->
<div class="toast" id="toast">
  <span class="toast-icon">✓</span>
  <span id="toast-msg">Profile saved</span>
</div>

<!-- PAGE -->
<div class="page-wrap">

  <!-- Loaded Banner -->
  <div class="profile-banner" id="profile-banner">
    <svg width="16" height="16" viewBox="0 0 16 16" fill="none"><circle cx="8" cy="8" r="7" fill="#22C55E"/><path d="M5 8l2 2 4-4" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
    Client profile active: <span class="banner-name" id="banner-name"></span> &mdash; Suitability score <span class="banner-score" id="banner-score"></span>/100
    <button class="btn btn-ghost" style="margin-left:auto;padding:4px 10px;font-size:12px;" onclick="scrollToForm()">Edit →</button>
  </div>

  <!-- Header -->
  <div class="page-header">
    <div>
      <h1>Client Profile &amp; Suitability</h1>
      <p>Build a client profile to generate a suitability score and unlock fund matching across all offerings.</p>
    </div>
    <div class="score-panel">
      <div class="score-label">Suitability Score</div>
      <div class="score-ring">
        <svg width="100" height="100" viewBox="0 0 100 100">
          <circle class="ring-bg" cx="50" cy="50" r="45"/>
          <circle class="ring-fill none" id="ring-fill" cx="50" cy="50" r="45"/>
        </svg>
        <div class="score-num" id="score-num">—</div>
      </div>
      <div class="score-badge" id="score-badge">No profile</div>
      <div class="score-breakdown" id="score-breakdown" style="display:none">
        <div class="sb-row"><span>Risk match</span><span class="sb-val" id="sb-risk">—</span></div>
        <div class="sb-row"><span>Objective match</span><span class="sb-val" id="sb-obj">—</span></div>
        <div class="sb-row"><span>Financial fit</span><span class="sb-val" id="sb-fin">—</span></div>
        <div class="sb-row"><span>Accreditation</span><span class="sb-val" id="sb-acc">—</span></div>
      </div>
    </div>
  </div>

  <!-- FORM GRID -->
  <div class="form-grid" id="client-form">

    <!-- Identity -->
    <div class="section-card">
      <div class="section-title">
        <svg width="14" height="14" viewBox="0 0 14 14" fill="none"><rect x="1" y="1" width="12" height="12" rx="3" stroke="currentColor" stroke-width="1.4"/><path d="M4 5h6M4 7.5h4" stroke="currentColor" stroke-width="1.4" stroke-linecap="round"/></svg>
        Client Identity
      </div>
      <div class="field-row">
        <div class="field">
          <label>Client Name <span class="req">*</span></label>
          <input type="text" id="inp-client-name" placeholder="First Last" oninput="liveScore()">
        </div>
        <div class="field">
          <label>State of Residence</label>
          <select id="inp-state" onchange="liveScore()">
            <option value="">Select state…</option>
            <option>AL</option><option>AK</option><option>AZ</option><option>AR</option>
            <option>CA</option><option>CO</option><option>CT</option><option>DE</option>
            <option>FL</option><option>GA</option><option>HI</option><option>ID</option>
            <option>IL</option><option>IN</option><option>IA</option><option>KS</option>
            <option>KY</option><option>LA</option><option>ME</option><option>MD</option>
            <option>MA</option><option>MI</option><option>MN</option><option>MS</option>
            <option>MO</option><option>MT</option><option>NE</option><option>NV</option>
            <option>NH</option><option>NJ</option><option>NM</option><option>NY</option>
            <option>NC</option><option>ND</option><option>OH</option><option>OK</option>
            <option>OR</option><option>PA</option><option>RI</option><option>SC</option>
            <option>SD</option><option>TN</option><option>TX</option><option>UT</option>
            <option>VT</option><option>VA</option><option>WA</option><option>WV</option>
            <option>WI</option><option>WY</option><option>DC</option>
          </select>
        </div>
      </div>
      <div class="field">
        <label>Federal Tax Bracket</label>
        <select id="inp-tax-bracket" onchange="liveScore()">
          <option value="">Select bracket…</option>
          <option value="10">10%</option>
          <option value="12">12%</option>
          <option value="22">22%</option>
          <option value="24">24%</option>
          <option value="32">32%</option>
          <option value="35">35%</option>
          <option value="37">37%</option>
        </select>
        <div class="field-hint">Used to calculate depreciation shelter benefit and after-tax yield.</div>
      </div>
    </div>

    <!-- Accreditation -->
    <div class="section-card">
      <div class="section-title">
        <svg width="14" height="14" viewBox="0 0 14 14" fill="none"><path d="M7 1l1.5 3 3.5.5-2.5 2.5.5 3.5L7 9l-3 1.5.5-3.5L2 4.5 5.5 4z" stroke="currentColor" stroke-width="1.3" stroke-linejoin="round"/></svg>
        Accreditation &amp; Risk
      </div>
      <div class="field">
        <label>Accredited Status <span class="req">*</span></label>
        <div class="pill-group" id="pg-accredited">
          <div class="pill-opt" data-val="accredited" onclick="selectPill('accredited','pg-accredited')">Accredited Investor</div>
          <div class="pill-opt" data-val="qualified-purchaser" onclick="selectPill('qualified-purchaser','pg-accredited')">Qualified Purchaser</div>
        </div>
        <div class="field-hint">Qualified Purchaser ($5M+ investable assets) unlocks additional offering types.</div>
      </div>
      <div class="field" style="margin-top:16px">
        <label>Risk Tolerance <span class="req">*</span></label>
        <div class="pill-group" id="pg-risk">
          <div class="pill-opt" data-val="conservative" onclick="selectPill('conservative','pg-risk')">Conservative</div>
          <div class="pill-opt" data-val="moderate" onclick="selectPill('moderate','pg-risk')">Moderate</div>
          <div class="pill-opt" data-val="aggressive" onclick="selectPill('aggressive','pg-risk')">Aggressive</div>
        </div>
        <div class="field-hint">Conservative → debt-structured/NNN; Aggressive → value-add equity strategies.</div>
      </div>
    </div>

    <!-- Investment Objective -->
    <div class="section-card">
      <div class="section-title">
        <svg width="14" height="14" viewBox="0 0 14 14" fill="none"><path d="M2 10l3-3 2 2 5-5" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/><circle cx="12" cy="4" r="1.5" stroke="currentColor" stroke-width="1.2"/></svg>
        Investment Objective
      </div>
      <div class="field">
        <label>Primary Objective <span class="req">*</span></label>
        <div class="pill-group" id="pg-objective">
          <div class="pill-opt" data-val="income" onclick="selectPill('income','pg-objective')">Current Income</div>
          <div class="pill-opt" data-val="growth" onclick="selectPill('growth','pg-objective')">Growth / Appreciation</div>
          <div class="pill-opt" data-val="preservation" onclick="selectPill('preservation','pg-objective')">Capital Preservation</div>
        </div>
      </div>
      <div class="field" style="margin-top:16px">
        <label>Hold Period Preference</label>
        <div class="pill-group" id="pg-hold">
          <div class="pill-opt" data-val="5" onclick="selectPill('5','pg-hold')">5 Years</div>
          <div class="pill-opt" data-val="7" onclick="selectPill('7','pg-hold')">7 Years</div>
          <div class="pill-opt" data-val="10" onclick="selectPill('10','pg-hold')">10 Years</div>
          <div class="pill-opt" data-val="flexible" onclick="selectPill('flexible','pg-hold')">Flexible</div>
        </div>
      </div>
      <div class="field" style="margin-top:14px">
        <label>Distribution Preference</label>
        <div class="pill-group" id="pg-distribution">
          <div class="pill-opt" data-val="monthly" onclick="selectPill('monthly','pg-distribution')">Monthly</div>
          <div class="pill-opt" data-val="quarterly" onclick="selectPill('quarterly','pg-distribution')">Quarterly</div>
          <div class="pill-opt" data-val="reinvest" onclick="selectPill('reinvest','pg-distribution')">Reinvest</div>
        </div>
      </div>
    </div>

    <!-- Exchange / Financial -->
    <div class="section-card">
      <div class="section-title">
        <svg width="14" height="14" viewBox="0 0 14 14" fill="none"><rect x="1" y="3" width="12" height="8" rx="2" stroke="currentColor" stroke-width="1.3"/><path d="M1 6h12" stroke="currentColor" stroke-width="1.3"/></svg>
        Exchange &amp; Investment Amount
      </div>
      <div class="field">
        <label>Exchange Amount ($)</label>
        <input type="text" id="inp-exchange-amount" class="mono" placeholder="e.g. 1,500,000" oninput="fmtInput(this); liveScore()">
        <div class="field-hint">Pre-fills the 1031 Modeler. Leave blank if not a 1031 exchange.</div>
      </div>
      <div class="field">
        <label>Investment Type</label>
        <div class="pill-group" id="pg-inv-type">
          <div class="pill-opt" data-val="1031" onclick="selectPill('1031','pg-inv-type')">1031 Exchange</div>
          <div class="pill-opt" data-val="direct" onclick="selectPill('direct','pg-inv-type')">Direct Investment</div>
          <div class="pill-opt" data-val="ira" onclick="selectPill('ira','pg-inv-type')">IRA / Self-Directed</div>
        </div>
      </div>
      <div class="field" style="margin-top:14px">
        <label>Min. Liquidity Needed After Investment</label>
        <div class="pill-group" id="pg-liquidity">
          <div class="pill-opt" data-val="high" onclick="selectPill('high','pg-liquidity')">High (&gt;20%)</div>
          <div class="pill-opt" data-val="medium" onclick="selectPill('medium','pg-liquidity')">Medium (10–20%)</div>
          <div class="pill-opt" data-val="low" onclick="selectPill('low','pg-liquidity')">Low (&lt;10%)</div>
        </div>
      </div>
    </div>

    <!-- Financial Profile -->
    <div class="section-card">
      <div class="section-title">
        <svg width="14" height="14" viewBox="0 0 14 14" fill="none"><path d="M7 1v12M1 4h12M1 10h12" stroke="currentColor" stroke-width="1.4" stroke-linecap="round"/></svg>
        Financial Profile
      </div>
      <div class="field-row">
        <div class="field">
          <label>Liquid Net Worth ($)</label>
          <input type="text" id="inp-liquid-nw" class="mono" placeholder="e.g. 2,000,000" oninput="fmtInput(this); liveScore()">
        </div>
        <div class="field">
          <label>Total Net Worth ($)</label>
          <input type="text" id="inp-total-nw" class="mono" placeholder="e.g. 5,000,000" oninput="fmtInput(this); liveScore()">
        </div>
      </div>
      <div class="field">
        <label>Annual Income ($)</label>
        <input type="text" id="inp-annual-income" class="mono" placeholder="e.g. 350,000" oninput="fmtInput(this); liveScore()">
      </div>
      <div class="field">
        <label>Prior Alts Experience</label>
        <div class="pill-group" id="pg-experience">
          <div class="pill-opt" data-val="none" onclick="selectPill('none','pg-experience')">None</div>
          <div class="pill-opt" data-val="limited" onclick="selectPill('limited','pg-experience')">Limited</div>
          <div class="pill-opt" data-val="moderate" onclick="selectPill('moderate','pg-experience')">Moderate</div>
          <div class="pill-opt" data-val="extensive" onclick="selectPill('extensive','pg-experience')">Extensive</div>
        </div>
      </div>
    </div>

    <!-- Property Preferences -->
    <div class="section-card">
      <div class="section-title">
        <svg width="14" height="14" viewBox="0 0 14 14" fill="none"><path d="M2 12V7l5-5 5 5v5H9V9H5v3z" stroke="currentColor" stroke-width="1.3" stroke-linejoin="round"/></svg>
        Property Type Preferences
      </div>
      <div class="field">
        <label>Preferred Property Types <span style="font-weight:400;color:var(--slate2)">(select all that apply)</span></label>
        <div class="pill-group" id="pg-prop-types" style="gap:6px; margin-top:4px;">
          <div class="pill-opt multi" data-val="multifamily" onclick="toggleMultiPill(this)">Multifamily</div>
          <div class="pill-opt multi" data-val="industrial" onclick="toggleMultiPill(this)">Industrial</div>
          <div class="pill-opt multi" data-val="net-lease" onclick="toggleMultiPill(this)">Net Lease / NNN</div>
          <div class="pill-opt multi" data-val="office" onclick="toggleMultiPill(this)">Office</div>
          <div class="pill-opt multi" data-val="senior-housing" onclick="toggleMultiPill(this)">Senior Housing</div>
          <div class="pill-opt multi" data-val="self-storage" onclick="toggleMultiPill(this)">Self Storage</div>
          <div class="pill-opt multi" data-val="medical" onclick="toggleMultiPill(this)">Medical / MOB</div>
          <div class="pill-opt multi" data-val="mixed-use" onclick="toggleMultiPill(this)">Mixed Use</div>
          <div class="pill-opt multi" data-val="no-preference" onclick="toggleMultiPill(this)">No Preference</div>
        </div>
      </div>
      <div class="field" style="margin-top:14px">
        <label>Geographic Preference</label>
        <div class="pill-group" id="pg-geo">
          <div class="pill-opt" data-val="sunbelt" onclick="selectPill('sunbelt','pg-geo')">Sunbelt</div>
          <div class="pill-opt" data-val="midwest" onclick="selectPill('midwest','pg-geo')">Midwest</div>
          <div class="pill-opt" data-val="northeast" onclick="selectPill('northeast','pg-geo')">Northeast</div>
          <div class="pill-opt" data-val="national" onclick="selectPill('national','pg-geo')">Nationwide / No Pref</div>
        </div>
      </div>
    </div>

    <!-- Notes -->
    <div class="section-card full">
      <div class="section-title">
        <svg width="14" height="14" viewBox="0 0 14 14" fill="none"><rect x="1.5" y="1.5" width="11" height="11" rx="2" stroke="currentColor" stroke-width="1.3"/><path d="M4 4.5h6M4 7h6M4 9.5h3" stroke="currentColor" stroke-width="1.3" stroke-linecap="round"/></svg>
        Notes &amp; Special Considerations
      </div>
      <div class="field-row">
        <div class="field">
          <label>Advisor Notes</label>
          <textarea id="inp-notes" placeholder="Any special considerations, concerns, or context for this client…"></textarea>
        </div>
        <div class="field">
          <label>Suitability Score Breakdown</label>
          <table class="weight-table" id="score-table">
            <thead>
              <tr>
                <th>Component</th>
                <th>Weight</th>
                <th class="score-bar-cell"></th>
                <th>Score</th>
              </tr>
            </thead>
            <tbody id="score-table-body">
              <tr><td colspan="4" style="color:var(--slate2);font-size:12px;padding:14px 8px;text-align:center">Complete the profile to see score breakdown</td></tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Action Row -->
      <div class="action-row">
        <button class="btn btn-primary" onclick="saveProfile()">
          <svg width="15" height="15" viewBox="0 0 15 15" fill="none"><path d="M2 7.5L6 11.5L13 4" stroke="white" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/></svg>
          Save &amp; Activate Profile
        </button>
        <button class="btn btn-secondary" onclick="AFL && AFL.navigate ? AFL.navigate('browse') : (window.location='browse.html')">
          Browse Offerings →
        </button>
        <button class="btn btn-secondary" onclick="AFL && AFL.navigate ? AFL.navigate('model') : (window.location='model.html')">
          Open Modeler →
        </button>
        <button class="btn btn-ghost" onclick="openModal()" style="margin-left:auto">
          Clear Profile
        </button>
      </div>
    </div>

  </div><!-- /form-grid -->
</div><!-- /page-wrap -->

<script>
// ── AFL STATE BRIDGE ──
// Works standalone and embedded in the AFL shell
function getAFL() {
  try { return window.AFL || (window.parent && window.parent.AFL); }
  catch(e) { return null; }
}

// State object — mirrors AFL.state.client schema
const state = {
  accredited: '',
  risk: '',
  objective: '',
  holdPeriod: '',
  distribution: '',
  invType: '',
  liquidity: '',
  experience: '',
  propTypes: [],
  geo: '',
};

// ── PILL LOGIC ──
function selectPill(val, groupId) {
  const group = document.getElementById(groupId);
  if (!group) return;
  group.querySelectorAll('.pill-opt').forEach(p => p.classList.remove('selected'));
  const target = group.querySelector(`[data-val="${val}"]`);
  if (target) target.classList.add('selected');

  // Update state
  if (groupId === 'pg-accredited') state.accredited = val;
  else if (groupId === 'pg-risk') state.risk = val;
  else if (groupId === 'pg-objective') state.objective = val;
  else if (groupId === 'pg-hold') state.holdPeriod = val;
  else if (groupId === 'pg-distribution') state.distribution = val;
  else if (groupId === 'pg-inv-type') state.invType = val;
  else if (groupId === 'pg-liquidity') state.liquidity = val;
  else if (groupId === 'pg-experience') state.experience = val;
  else if (groupId === 'pg-geo') state.geo = val;

  liveScore();
}

function toggleMultiPill(el) {
  const val = el.dataset.val;
  if (val === 'no-preference') {
    // Deselect all others
    document.querySelectorAll('#pg-prop-types .pill-opt').forEach(p => p.classList.remove('selected'));
    el.classList.add('selected');
    state.propTypes = ['no-preference'];
  } else {
    // Deselect no-preference
    const noPref = document.querySelector('#pg-prop-types [data-val="no-preference"]');
    if (noPref) noPref.classList.remove('selected');
    el.classList.toggle('selected');
    // Rebuild array
    state.propTypes = Array.from(document.querySelectorAll('#pg-prop-types .pill-opt.selected')).map(p => p.dataset.val);
  }
  liveScore();
}

// ── NUMBER FORMAT ──
function fmtInput(el) {
  const raw = el.value.replace(/[^0-9]/g, '');
  if (raw === '') { el.value = ''; return; }
  el.value = parseInt(raw).toLocaleString();
}
function parseAmt(id) {
  const val = document.getElementById(id).value.replace(/[^0-9.]/g, '');
  return parseFloat(val) || 0;
}
function getStr(id) {
  return document.getElementById(id).value.trim();
}

// ── SUITABILITY SCORING ENGINE ──
// Returns { total, components: { risk, objective, financial, accreditation } }
function calcScore() {
  const risk       = state.risk;
  const objective  = state.objective;
  const accredited = state.accredited;
  const experience = state.experience;
  const liquidity  = state.liquidity;
  const holdPref   = state.holdPeriod;
  const liquidNW   = parseAmt('inp-liquid-nw');
  const totalNW    = parseAmt('inp-total-nw');
  const annIncome  = parseAmt('inp-annual-income');
  const taxBracket = parseFloat(document.getElementById('inp-tax-bracket').value) || 0;
  const exchangeAmt = parseAmt('inp-exchange-amount');

  let riskScore = 0;
  let objScore = 0;
  let finScore = 0;
  let accScore = 0;

  // ── RISK SCORE (30pts) ──
  // Maps risk tolerance to DST profile readiness
  // Conservative: debt-light NNN, net lease → lower risk DSTs → good fit
  // Moderate: balanced equity/debt → broadest fit
  // Aggressive: value-add, development DSTs → narrower fit but present
  if (risk === 'conservative') riskScore = 22; // Most DSTs are conservative by nature
  else if (risk === 'moderate') riskScore = 30;
  else if (risk === 'aggressive') riskScore = 18; // Fewer truly aggressive DST options

  // Experience modifier
  if (risk === 'aggressive' && experience === 'extensive') riskScore += 5;
  if (risk === 'aggressive' && experience === 'none') riskScore -= 5;
  if (risk === 'conservative' && experience === 'none') riskScore += 5;

  riskScore = Math.min(30, Math.max(0, riskScore));

  // ── OBJECTIVE SCORE (30pts) ──
  // Income seekers are the natural DST buyer
  // Preservation is also well-served; growth is harder to satisfy
  if (objective === 'income') objScore = 30;
  else if (objective === 'preservation') objScore = 24;
  else if (objective === 'growth') objScore = 16;

  // Hold period modifier
  if (holdPref === '10' || holdPref === 'flexible') objScore = Math.min(30, objScore + 4);
  else if (holdPref === '5') objScore = Math.max(0, objScore - 3);

  // Tax bracket bonus — higher bracket = more depreciation benefit = better fit
  if (taxBracket >= 35) objScore = Math.min(30, objScore + 3);
  else if (taxBracket >= 32) objScore = Math.min(30, objScore + 2);
  else if (taxBracket > 0 && taxBracket <= 22) objScore = Math.max(0, objScore - 2);

  // ── FINANCIAL SCORE (25pts) ──
  // Minimum thresholds for DST suitability
  let finPoints = 0;

  // Liquid net worth (DST illiquidity requirement)
  if (liquidNW >= 500000) finPoints += 5;
  else if (liquidNW >= 250000) finPoints += 3;
  else if (liquidNW > 0) finPoints += 1;

  // Total net worth
  if (totalNW >= 5000000) finPoints += 8;
  else if (totalNW >= 2000000) finPoints += 6;
  else if (totalNW >= 1000000) finPoints += 4;
  else if (totalNW > 0) finPoints += 2;

  // Annual income
  if (annIncome >= 500000) finPoints += 6;
  else if (annIncome >= 200000) finPoints += 5;
  else if (annIncome >= 100000) finPoints += 3;
  else if (annIncome > 0) finPoints += 1;

  // Exchange amount / investment size
  if (exchangeAmt >= 1000000) finPoints += 6;
  else if (exchangeAmt >= 500000) finPoints += 4;
  else if (exchangeAmt >= 250000) finPoints += 2;
  else if (exchangeAmt > 0) finPoints += 1;

  finScore = Math.min(25, finPoints);

  // Liquidity flag penalty
  if (liquidity === 'high') finScore = Math.max(0, finScore - 5); // Illiquid investment, bad fit
  else if (liquidity === 'medium') finScore = Math.max(0, finScore - 1);

  // ── ACCREDITATION SCORE (15pts) ──
  if (accredited === 'qualified-purchaser') accScore = 15;
  else if (accredited === 'accredited') accScore = 10;
  else accScore = 0;

  // Experience bonus
  if (experience === 'extensive') accScore = Math.min(15, accScore + 3);
  else if (experience === 'moderate') accScore = Math.min(15, accScore + 1);

  const total = Math.round(riskScore + objScore + finScore + accScore);

  return {
    total: Math.min(100, Math.max(0, total)),
    components: {
      risk:          { score: Math.round(riskScore), max: 30, label: 'Risk alignment' },
      objective:     { score: Math.round(objScore), max: 30, label: 'Objective fit' },
      financial:     { score: Math.round(finScore), max: 25, label: 'Financial profile' },
      accreditation: { score: Math.round(accScore), max: 15, label: 'Accreditation' },
    }
  };
}

// ── LIVE SCORE UPDATE ──
function liveScore() {
  const result = calcScore();
  const total = result.total;
  const hasProfile = (state.risk || state.objective || state.accredited);

  // Ring
  const ring = document.getElementById('ring-fill');
  const scoreEl = document.getElementById('score-num');
  if (hasProfile) {
    const circ = 2 * Math.PI * 45; // 283
    const offset = circ * (1 - total / 100);
    ring.style.strokeDashoffset = offset;
    scoreEl.textContent = total;
    ring.className = 'ring-fill ' + (total >= 70 ? 'high' : total >= 45 ? 'med' : 'low');
  } else {
    ring.style.strokeDashoffset = 283;
    ring.className = 'ring-fill none';
    scoreEl.textContent = '—';
  }

  // Badge
  const badge = document.getElementById('score-badge');
  badge.className = 'score-badge';
  if (!hasProfile) { badge.textContent = 'No profile'; }
  else if (total >= 70) { badge.classList.add('strong'); badge.textContent = 'Strong match'; }
  else if (total >= 45) { badge.classList.add('moderate'); badge.textContent = 'Moderate match'; }
  else { badge.classList.add('limited'); badge.textContent = 'Limited match'; }

  // Score breakdown sidebar
  const breakdown = document.getElementById('score-breakdown');
  if (hasProfile) {
    breakdown.style.display = 'block';
    const c = result.components;
    setText('sb-risk', c.risk.score + '/' + c.risk.max);
    setText('sb-obj', c.objective.score + '/' + c.objective.max);
    setText('sb-fin', c.financial.score + '/' + c.financial.max);
    setText('sb-acc', c.accreditation.score + '/' + c.accreditation.max);
  } else {
    breakdown.style.display = 'none';
  }

  // Score table
  if (hasProfile) {
    const c = result.components;
    const rows = Object.values(c);
    const tbody = document.getElementById('score-table-body');
    tbody.innerHTML = rows.map(r => {
      const pct = Math.round((r.score / r.max) * 100);
      const color = pct >= 70 ? '#22C55E' : pct >= 45 ? '#F59E0B' : '#EF4444';
      return `<tr>
        <td>${r.label}</td>
        <td style="color:var(--slate2);font-size:11px">/${r.max}pts</td>
        <td class="score-bar-cell">
          <div class="mini-bar-wrap">
            <div class="mini-bar" style="width:${pct}%;background:${color}"></div>
          </div>
        </td>
        <td>${r.score}</td>
      </tr>`;
    }).join('') + `<tr style="border-top:2px solid var(--border)">
        <td style="font-weight:700;color:var(--navy)">Total Score</td>
        <td style="color:var(--slate2);font-size:11px">/100pts</td>
        <td></td>
        <td style="font-weight:700;color:var(--navy);font-size:14px">${total}</td>
      </tr>`;
  }
}

function setText(id, val) {
  const el = document.getElementById(id);
  if (el) el.textContent = val;
}

// ── SAVE PROFILE ──
function saveProfile() {
  const name = getStr('inp-client-name');
  if (!name) { showToast('Please enter a client name', false); return; }
  if (!state.accredited) { showToast('Please select accredited status', false); return; }
  if (!state.risk) { showToast('Please select a risk tolerance', false); return; }
  if (!state.objective) { showToast('Please select an investment objective', false); return; }

  const result = calcScore();
  const exchangeAmt = parseAmt('inp-exchange-amount');

  const clientData = {
    name:                name,
    stateOfResidence:    getStr('inp-state'),
    taxBracket:          parseFloat(document.getElementById('inp-tax-bracket').value) || 0,
    accreditedStatus:    state.accredited,
    riskTolerance:       state.risk,
    investmentObjective: state.objective,
    holdPeriod:          state.holdPeriod,
    distribution:        state.distribution,
    investmentType:      state.invType,
    liquidityNeeded:     state.liquidity,
    experience:          state.experience,
    propTypePrefs:       state.propTypes,
    geoPreference:       state.geo,
    exchangeAmount:      exchangeAmt,
    liquidNetWorth:      parseAmt('inp-liquid-nw'),
    totalNetWorth:       parseAmt('inp-total-nw'),
    annualIncome:        parseAmt('inp-annual-income'),
    notes:               getStr('inp-notes'),
    suitabilityScore:    result.total,
    scoreComponents:     result.components,
    savedAt:             new Date().toISOString(),
  };

  // Write to AFL.state
  const afl = getAFL();
  if (afl && afl.state) {
    afl.state.client = clientData;
    // Sync exchange amount to modeler input field if present
    if (exchangeAmt > 0 && afl.state.exchange) {
      afl.state.exchange.netEquity = exchangeAmt;
    }
  }

  // Persist to sessionStorage as fallback
  try { sessionStorage.setItem('afl_client', JSON.stringify(clientData)); } catch(e) {}

  // Update UI
  updateLoadedState(clientData);
  showToast('✓  Client profile saved — suitability score: ' + result.total + '/100', true);

  // Refresh browse match badges if that module is listening
  try {
    if (afl && afl.events) afl.events.emit('client:updated', clientData);
  } catch(e) {}
}

function updateLoadedState(client) {
  // Banner
  const banner = document.getElementById('profile-banner');
  banner.classList.add('visible');
  setText('banner-name', client.name);
  setText('banner-score', client.suitabilityScore);

  // Nav chip
  const chip = document.getElementById('nav-client-chip');
  chip.classList.add('loaded');
  setText('nav-client-label', client.name);
}

// ── CLEAR PROFILE ──
function openModal() {
  document.getElementById('clear-modal').classList.add('open');
}
function closeModal() {
  document.getElementById('clear-modal').classList.remove('open');
}
function confirmClear() {
  // Reset form
  document.getElementById('inp-client-name').value = '';
  document.getElementById('inp-state').value = '';
  document.getElementById('inp-tax-bracket').value = '';
  document.getElementById('inp-exchange-amount').value = '';
  document.getElementById('inp-liquid-nw').value = '';
  document.getElementById('inp-total-nw').value = '';
  document.getElementById('inp-annual-income').value = '';
  document.getElementById('inp-notes').value = '';

  // Reset pills
  document.querySelectorAll('.pill-opt').forEach(p => p.classList.remove('selected'));
  Object.keys(state).forEach(k => { state[k] = Array.isArray(state[k]) ? [] : ''; });

  // Reset score
  const ring = document.getElementById('ring-fill');
  ring.style.strokeDashoffset = 283;
  ring.className = 'ring-fill none';
  setText('score-num', '—');
  const badge = document.getElementById('score-badge');
  badge.className = 'score-badge';
  badge.textContent = 'No profile';
  document.getElementById('score-breakdown').style.display = 'none';
  document.getElementById('score-table-body').innerHTML = '<tr><td colspan="4" style="color:var(--slate2);font-size:12px;padding:14px 8px;text-align:center">Complete the profile to see score breakdown</td></tr>';

  // Clear AFL state
  const afl = getAFL();
  if (afl && afl.state) {
    afl.state.client = { name:'',exchangeAmount:0,accreditedStatus:'',riskTolerance:'',investmentObjective:'',suitabilityScore:0,taxBracket:0,stateOfResidence:'',liquidNetWorth:0,totalNetWorth:0,annualIncome:0 };
  }
  try { sessionStorage.removeItem('afl_client'); } catch(e) {}

  // Banner
  document.getElementById('profile-banner').classList.remove('visible');
  const chip = document.getElementById('nav-client-chip');
  chip.classList.remove('loaded');
  setText('nav-client-label', 'No client loaded');

  closeModal();
  showToast('Profile cleared', false);
}

// ── TOAST ──
let toastTimer;
function showToast(msg, success=true) {
  const el = document.getElementById('toast');
  document.getElementById('toast-msg').textContent = msg;
  el.className = 'toast' + (success ? ' success' : '') + ' visible';
  clearTimeout(toastTimer);
  toastTimer = setTimeout(() => el.classList.remove('visible'), 3200);
}

// ── LOAD FROM AFL STATE ──
function loadFromState() {
  const afl = getAFL();
  let client = null;
  if (afl && afl.state && afl.state.client && afl.state.client.name) {
    client = afl.state.client;
  } else {
    try {
      const stored = sessionStorage.getItem('afl_client');
      if (stored) client = JSON.parse(stored);
    } catch(e) {}
  }
  if (!client) return;

  // Populate fields
  if (client.name) document.getElementById('inp-client-name').value = client.name;
  if (client.stateOfResidence) document.getElementById('inp-state').value = client.stateOfResidence;
  if (client.taxBracket) document.getElementById('inp-tax-bracket').value = client.taxBracket;
  if (client.exchangeAmount) { document.getElementById('inp-exchange-amount').value = client.exchangeAmount.toLocaleString(); }
  if (client.liquidNetWorth) document.getElementById('inp-liquid-nw').value = client.liquidNetWorth.toLocaleString();
  if (client.totalNetWorth) document.getElementById('inp-total-nw').value = client.totalNetWorth.toLocaleString();
  if (client.annualIncome) document.getElementById('inp-annual-income').value = client.annualIncome.toLocaleString();
  if (client.notes) document.getElementById('inp-notes').value = client.notes;

  // Restore pill state
  if (client.accreditedStatus) { state.accredited = client.accreditedStatus; selectPill(client.accreditedStatus, 'pg-accredited'); }
  if (client.riskTolerance) { state.risk = client.riskTolerance; selectPill(client.riskTolerance, 'pg-risk'); }
  if (client.investmentObjective) { state.objective = client.investmentObjective; selectPill(client.investmentObjective, 'pg-objective'); }
  if (client.holdPeriod) { state.holdPeriod = client.holdPeriod; selectPill(client.holdPeriod, 'pg-hold'); }
  if (client.distribution) { state.distribution = client.distribution; selectPill(client.distribution, 'pg-distribution'); }
  if (client.investmentType) { state.invType = client.investmentType; selectPill(client.investmentType, 'pg-inv-type'); }
  if (client.liquidityNeeded) { state.liquidity = client.liquidityNeeded; selectPill(client.liquidityNeeded, 'pg-liquidity'); }
  if (client.experience) { state.experience = client.experience; selectPill(client.experience, 'pg-experience'); }
  if (client.geoPreference) { state.geo = client.geoPreference; selectPill(client.geoPreference, 'pg-geo'); }
  if (client.propTypePrefs && client.propTypePrefs.length) {
    state.propTypes = client.propTypePrefs;
    client.propTypePrefs.forEach(v => {
      const el = document.querySelector(`#pg-prop-types [data-val="${v}"]`);
      if (el) el.classList.add('selected');
    });
  }

  liveScore();
  if (client.name) updateLoadedState(client);
}

function scrollToForm() {
  document.getElementById('client-form').scrollIntoView({ behavior: 'smooth' });
}

// ── INIT ──
document.addEventListener('DOMContentLoaded', function() {
  // Initialize ring stroke-dasharray
  document.querySelector('.ring-fill').style.strokeDasharray = '283';
  loadFromState();
});

// Also expose to AFL shell for navigation events
window.AFL_CLIENT = {
  save: saveProfile,
  getScore: () => calcScore().total,
  reload: loadFromState,
};
</script>
</body>
</html>
